
{% extends "login/base-list.html" %}
{% load extra_filters %}

{% load staticfiles %}

{% block css %}
{{ block.super }}
{% endblock %}

{% block section_title %}Consultar Estado de Cuenta de Proveedores{% endblock %}
{% block section_subtitle %}
<br />
<style type="text/css">
	.table2 td{
		padding: 2px;
	}
	.table2 th{
		padding: 2px;
	}
</style>
 <div class="email-btn-row hidden-xs">
                    </div>

                    {% endblock %}

{% block content %}
				<!-- begin col-12 -->
				<div class="col-md-12">
					<!-- begin panel -->
					<div class="panel panel-inverse">
						<div class="panel-heading">
							<div class="panel-heading-btn">
								<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
								<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
							</div>
							<h4 class="panel-title">Reporte:</h4>
						</div>
						<div class="panel-body">
							<div class="table-responsive">
						
						<div class="col-md-4">
                                                      <label for="exampleInputName2">Proveedor desde:</label>
                                                      <select id="proveedor" class="form-control" name="proveedor">
                                        <option value=Â¨0" selected>SELECCIONE PROVEEDOR</option>
                                        {% for p  in proveedores %}
                                            <option value="{{ p.0 }}">{{ p.1 }} - {{ p.2 }}</option>
                                        {% endfor %}
                                    </select>
							</div>
						<div class="col-md-4">
                                                      <label for="exampleInputName2">Proveedor hasta:</label>
                                                      <select id="proveedor_hasta" class="form-control" name="proveedor_hasta">
                                        <option value="0" selected>SELECCIONE PROVEEDOR</option>
                                        {% for p  in proveedores %}
                                            <option value="{{ p.0 }}">{{ p.1 }} - {{ p.2 }}</option>
                                        {% endfor %}
                                    </select>
							</div>
						<div class="col-md-4">
                                                      <label for="exampleInputName2">Fecha desde:</label>
                                                     <input  class="form-control" type="date" name="fechainicial" id="fechainicial" />
                                               
							</div>

<div class="col-md-4">
                                                      <label for="exampleInputName2">Fecha hasta:</label>
                                                     <input  class="form-control" type="date" name="fechafin" id="fechafin" />
                                               
							</div>
<a class="default btn btn-link"  onclick="consultar()"> <button type="button" class="btn btn-primary btn-lg">  Consultar</button> </a>
                                                <a class="btn btn-default buttons-copy buttons-html5" tabindex="0" aria-controls="tabla" download="reporte_estado_cuenta_proveedores.xls" href="#" onclick="return ExcellentExport.excel(this, 'tabla', 'Sheet Name Here');"><span>EXCEL</span></a>  

<h2>Resultados</h2>
             <div class="row" style="">
                                            <div class="panel panel-default panel-border">
                                                <!-- Default panel contents -->
                                                <div class="panel-heading"></div>
                                                <div class="panel-body" style="overflow-x: scroll;" id="valor">


						</div>
					</div>
					
				</div>
							</div>
				</div>
				</div>
				</div>
 
				<!-- end col-12 -->	
			
{% endblock %}

{% block javascript %}
{{ block.super }}
<script src="{% static 'color_admin/assets/js/inbox.demo.min.js' %}"></script>
<script src="{% static 'color_admin/assets/plugins/bootstrap-daterangepicker/moment.js' %}"></script>
<script src="{% static 'color_admin/assets/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js' %}"></script>
<script src="{% static 'color_admin/assets/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js' %}"></script>
<script src="{% static 'color_admin/assets/plugins/bootstrap-daterangepicker/daterangepicker.js' %}"></script>
<script src="{% static 'color_admin/assets/js/tools.js' %}"></script>
<script src="{% static 'color_admin/assets/js/censea.js' %}"></script>
<script src="{% static 'color_admin/assets/plugins/bootstrap-wizard/js/bwizard.js' %}"></script>

<!--   	    <script src="{% static 'color_admin/assets/js/exportFile.js' %}" type="text/javascript"></script>
-->
<script src="{% static 'color_admin/assets/js/excellentexport.js' %}" type="text/javascript"></script>
  <script src="https://docraptor.com/docraptor-1.0.0.js"></script>

	<script type="text/javascript">
		

	function consultar(){
		
		var fechainicial=$("#fechainicial").val();
		var fechafin=$("#fechafin").val();
		var proveedor=$("#proveedor").val();
		var proveedor_hasta=$("#proveedor_hasta").val();

          $.ajax({
                url: "/bancos/reporte/consulta_cuenta_proveedor/", // the endpoint
                type : "POST", // http method
                data : { fechainicial : fechainicial,fechafin : fechafin,proveedor : proveedor,proveedor_hasta : proveedor_hasta,'csrfmiddlewaretoken': '{{ csrf_token }}'}, 
                success:function(data){
                //$("#tabla tbody tr").remove();
                  $("#valor").html(data);
//				   $('#tabla').DataTable( {
//					 paging: false,
//					 "formatNumber": function ( toFormat ) {
//    return toFormat.toString().replace(
//      /\B(?=(\d{3})+(?!\d))/g, "'"
//    );
//  },
//							dom: 'Bfrtip',
//							buttons: [
//								'copy', 'csv', 'pdf', 'print'
//							]
//						} );
                },
                error: function(){
                 
                },
              });
    }
	</script>
	<!-- ================== END PAGE LEVEL JS ================== -->
	{% if form.errors or form_mode == "update" %}
	<script type="text/javascript">
		$( document ).ready(function() {
		    $(".modal").modal('toggle');
		});
	
	</script>
	{% endif %}
{% endblock %}

