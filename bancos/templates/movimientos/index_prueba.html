{% extends "login/base-list.html" %}
{% load extra_filters %}
{% load staticfiles %}

{% block css %}
    {{ block.super }}

{% endblock %}

{% block section_title %}
    Consulta de movimientos bancarios
{% endblock %}

{% block section_subtitle %}
    <br/>
    <div class="email-btn-row hidden-xs" style="margin-left: 1.4%;">
        <a href="{% url 'movimiento-nuevo' %}" class="btn btn-sm btn-inverse">
            <i class="fa fa-plus m-r-5"></i>
            Nuevo
        </a>
    </div>
{% endblock %}

{% block content %}
    <!-- begin col-12 -->
    <div class="col-md-12">
        <!-- begin panel -->
        <div class="panel panel-inverse">
            <div class="panel-heading">
                <div class="panel-heading-btn">
                    <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand">
                        <i class="fa fa-expand"></i>
                    </a>
                    <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning"
                       data-click="panel-collapse">
                        <i class="fa fa-minus"></i>
                        Listado de movimientos
                    </a>
                </div>
                <h4 class="panel-title"></h4>
            </div>
            <div class="panel-body">
                <div class="table-responsive">
                    <table id="data-movimiento" class="table table-striped table-bordered">
                        <thead>
                        <tr>
                             <th>Tipo</th>
                            <th>Emisión</th>
                            <th>N° Comprobante</th>
                            <th>Persona</th>
                            <th>RUC</th>
                            <th>Transacción</th>
                            <th>No. Cheque</th>
                            <th>Cuenta bancaria</th>
                             <th>Valor del Cheque</th>
                            <th>Total</th>
                            <th>Descripcion</th>

                            <th>Estado</th>
                            <th width="100">Acción</th>
                        </tr>
                        </thead>
                       <!-- <tbody>
                        {% for movimiento  in movimientos %}
                            <tr>
                                <td><input type="checkbox" name=""/></td>
                                    <td>{{ movimiento.tipo_anticipo.descripcion }}</td>
                                <td>{{ movimiento.fecha_emision | date:'Y-m-d' }}</td>
                                <td>{{ movimiento.numero_comprobante }}</td>
                                {% if movimiento.cliente%}
                                <td>{{ movimiento.cliente.nombre_cliente}}</td>
                                {% else %}
                                <td>{{ movimiento.proveedor}}</td>
                                {% endif %}
                                 {% if movimiento.cliente%}
                                <td>{{ movimiento.cliente.ruc}}</td>
                                {% else %}
                                <td>{{ movimiento.proveedor.ruc}}</td>
                                {% endif %}
                                <td>{{ movimiento.tipo_documento.descripcion }}</td>
                                <td>{{ movimiento.numero_cheque }}</td>

                                <td>{{ movimiento.banco.nombre }} - {{movimiento.banco.tipo_cuenta}}</td>
                                
                                <td>
                                     {% if movimiento.tipo_documento.descripcion == "Cheque"  %}
                                {{ movimiento.monto_cheque }}
                                {% else %}
                                -
                                {% endif %}
                                    
                                    
                                    </td>
                                <td>{{ movimiento.monto }}</td>
                                <td>{{ movimiento.descripcion }}</td>

                                <td>
                                    {% if movimiento.activo %}
                                    Activo
                                 {% else %}
                                Anulado
                                {% endif %}
                                </td>
                                <td>
                                     {% if movimiento.conciliacion_id  %}
                                     
                                      {% else %}
                                
                                            {% if movimiento.activo %}
                                            <a href="{% url 'movimiento-edit' movimiento.id %}">
                                               <button type="button" class="btn btn-primary btn-xs">
                                                   <i class="fa fa-pencil-square-o icon-white"></i>
                                               </button>
                                           </a>
                                        {% else %}
                                       {% endif %}
                                          
       
                                           <a href="{% url 'movimiento-delete-pk' movimiento.id %}" onclick="return confirm('¿Está seguro de borrar este movimiento?')">
                                               <button type="button" class="btn btn-danger btn-xs">
                                                   <i class=" glyphicon glyphicon-trash icon-white"></i>
                                               </button>
                                           </a>
                                    {% endif %}
                                    {% if movimiento.tipo_documento.descripcion == "Cheque" %}
                                    <a href="{% url 'bancos-imprimir-cheque-actual' movimiento.id %}" target="_blank" title="Imprimir cheque">
                                        <button type="button" class="btn btn-default btn-xs">
                                            <i class="fa fa-money"></i>
                                        </button>
                                    </a>
                                    
                                    
                                    
                                    {% endif %}
                                  <a href="{% url 'movimiento-consultar-cheque' movimiento.id %}" >
                                        <button type="button" class="btn btn-default btn-xs">
                                            <i class="fa fa-eye"></i>
                                        </button>
                                    </a>
                                   
                                     <a href="{% url 'movimiento-comprobante-egreso' movimiento.id %}" target="_blank" title="Imprimir comprobante">
                                        <button type="button" class="btn btn-default btn-xs">
                                            <i class="fa fa-file-text-o"></i>
                                        </button>
                                    </a>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>-->
                    </table>
                </div>
            </div>
        </div>
        <!-- end panel -->
        <!-- #modal-dialog -->
    </div>
    <!-- end col-12 -->
{% endblock %}

{% block javascript %}
    {{ block.super }}
<script type="text/javascript">

 $(document).ready(function () {
            $('#data-movimiento').DataTable({
                 "processing": true,
                 "serverSide": true,
                 "ajax": "/bancos/movimiento/api",
                 "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
                 dom: 'Blfrtip',
	buttons: [
	    'csv', 'excel', 'pdf'
	]
                  
            });
        });
</script>
{% endblock %}



