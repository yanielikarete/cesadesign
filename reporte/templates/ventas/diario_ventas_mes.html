{% extends "login/base-list.html" %}
{% load extra_filters %}

{% load staticfiles %}

{% block css %}
{{ block.super }}
{% endblock %}

{% block section_title %}Diario de Ventas por Mes {% endblock %}
{% block section_subtitle %}
<br />
<style type="text/css">
	table td{
		padding: 2px;
	}
	table th{
		padding: 2px;
	}
</style>
 <div class="email-btn-row hidden-xs">
                    </div>

                    {% endblock %}

{% block content %}
				<!-- begin col-12 -->
				<div class="col-md-12">
					<!-- begin panel -->
					<div class="panel panel-inverse">
						<div class="panel-heading">
							<div class="panel-heading-btn">
								<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
								<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
							</div>
							<h4 class="panel-title">Reporte:</h4>
						</div>
						<div class="panel-body">
							<div class="table-responsive">
						
						<div class="col-md-4">
                                                      <label for="exampleInputName2">Vendedor</label>
                                                      <select name="vendedor" id="vendedor" class="form-control">
                                                      	<option value="0"> Seleccione</option>
                                                      	{% for c  in vendedor %}
                                                      	<option value="{{c.id}}"> {{c.nombre}}</option>
                                                      		{% endfor %}
                                                      </select>

                                                   </div>
                                                   <div class="col-md-4">
                                                      <label for="exampleInputName2">Anio</label>
                                                      <select name="anio" id="anio" class="form-control">
                                                      	<option value="2016"> 2016</option>
                                                      <option value="2017"> 2017</option>
                                                      <option value="2018"> 2018</option>
                                                      <option value="2019"> 2019</option>

                                                      </select>

                                                   </div>
							
						<div class="col-md-4">
                                                     <label for="exampleInputName2">Mes</label>
                                                     <select class="form-control"  name="mes" id="mes" />
                                                     <option value="1">Enero</option>
                                                     <option value="2">Febrero</option>
                                                     <option value="3">Marzo</option>
                                                     <option value="4">Abril</option>
                                                     <option value="5">Mayo</option>
                                                     <option value="6">Junio</option>
                                                     <option value="7">Julio</option>
                                                     <option value="8">Agosto</option>
                                                     <option value="9">Septiembre</option>
                                                     <option value="10">Octubre</option>
                                                     <option value="11">Noviembre</option>
                                                     <option value="12">Diciembre</option>
                                                     </select>  
                                               
							</div>


<a class="default btn btn-link"  onclick="consultar()"> <button type="button" class="btn btn-primary btn-lg">  Consultar</button> </a>
<a download="diario_ventas_mensual.xls" href="#" onclick="return ExcellentExport.excel(this, 'detalle', 'Sheet Name Here');"><button type="button" class="btn btn-primary btn-lg">  Exportar</button></a>
<h2>Resultados</h2>
<table id="detalle" class="table" border="1"   aria-describedby="data-table_info">



	
</table>

						</div>
					</div>
					
				</div>
				<!-- end col-12 -->	
			
{% endblock %}

{% block javascript %}
{{ block.super }}

   	    <script src="{% static 'color_admin/assets/js/exportFile.js' %}" type="text/javascript"></script>

	<script type="text/javascript">
		

	function consultar(){
		var vendedor=$("#vendedor").val();
		var mes=$("#mes").val();
		var mes_txt=$("#mes option:selected").text();
var anio=$("#anio").val();
          $.ajax({
                url: "/reporte/obtenerDiarioVentasMensual/", // the endpoint
                type : "POST", // http method
                data : { vendedor : vendedor,mes : mes,anio : anio,mes_txt:mes_txt,'csrfmiddlewaretoken': '{{ csrf_token }}'}, 
                success:function(data){
                $("#detalle tbody tr").remove();
                  $("#detalle").append(data);
                },
                error: function(){
                 
                },
              });
    }
	</script>
	<!-- ================== END PAGE LEVEL JS ================== -->
	{% if form.errors or form_mode == "update" %}
	<script type="text/javascript">
		$( document ).ready(function() {
		    $(".modal").modal('toggle');
		});
	
	</script>
	{% endif %}
{% endblock %}

