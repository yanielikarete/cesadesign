{% extends "login/base-list.html" %}
{% load extra_filters %}

{% load staticfiles %}

{% block css %}
{{ block.super }}
{% endblock %}

{% block section_title %}Cuentas por Cobrar por Vencimiento {% endblock %}
{% block section_subtitle %}
<br />
<style type="text/css">
	table td{
		padding: 2px;
	}
	table th{
		padding: 2px;
	}
</style>
 <div class="email-btn-row hidden-xs">
                    </div>

                    {% endblock %}

{% block content %}
				<!-- begin col-12 -->
				<div class="col-md-12">
					<!-- begin panel -->
					<div class="panel panel-inverse">
						<div class="panel-heading">
							<div class="panel-heading-btn">
								<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
								<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
							</div>
							<h4 class="panel-title">Listado de Cuentas por Cobrar por Vencimiento:</h4>
						</div>
						<div class="panel-body">
							<div class="table-responsive">

                                <div class="col-md-6">
                                     <label for="exampleInputName2">Fecha desde:</label>
                                     <input  class="form-control" type="date" name="fechainicial" id="fechainicial" />
                                </div>

                                <div class="col-md-6">
                                     <label for="exampleInputName2">Fecha hasta:</label>
                                     <input  class="form-control" type="date" name="fechafin" id="fechafin" />
                                </div>

                                <div class="col-md-12">
                                    <a class="default btn btn-link"  onclick="consultar()">
                                        <button type="button" class="btn btn-primary btn-lg">  Consultar</button> </a>
                                    <a download="saldos_clientes_cobrar.xls" href="#" onclick="return ExcellentExport.excel(this, 'detalle', 'Sheet Name Here');">
                                        <button type="button" class="btn btn-primary btn-lg">  EXCEL</button></a>
                                    <a class="default btn btn-link" onclick="printDiv()">
                                        <button type="button" class="btn btn-primary btn-lg">  PDF</button>
                                    </a>
                                </div>

                                <br />
                                <br />

                                <h2>Resultados</h2>

                                <div class="col-md-12" id="valor">
                                    <table id="detalle"  border="1"  class="table table-striped table-bordered">
                                        <thead>
                                        <tr>
                                            <th>Codigo</th>
                                            <th width="300px">Cliente&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                                            <th>Total Cartera</th>
                                            <th> 0 a 30 dias </th>
                                            <th>31 a 60 dias </th>
                                            <th>61 a 90 dias </th>
                                            <th>91 a 120 dias</th>
                                            <th> > a 120 dias</th>
                                        </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
					        </div>
                        </div>
                    </div>
                </div>
				<!-- end col-12 -->
				<iframe name="print_frame" width="0" height="0" frameborder="0" src="about:blank"></iframe>

			
{% endblock %}

{% block javascript %}
{{ block.super }}

   	    <script src="{% static 'color_admin/assets/js/exportFile.js' %}" type="text/javascript"></script>

	<script type="text/javascript">
		

	function consultar(){
		var fechainicial=$("#fechainicial").val();
		var fechafin=$("#fechafin").val();

          $.ajax({
                url: "/reporte/obtenerSaldosClientesCobrarVenc/", // the endpoint
                type : "POST", // http method
                data : { fechainicial : fechainicial,fechafin : fechafin,'csrfmiddlewaretoken': '{{ csrf_token }}'}, 
                success:function(data){
                $("#detalle tbody tr").remove();
                  $("#valor").html(data);
                },
                error: function(){
                 
                },
              });
    }
	function printDiv() {
         window.frames["print_frame"].document.body.innerHTML = document.getElementById("valor").innerHTML;
         window.frames["print_frame"].window.focus();
         window.frames["print_frame"].window.print();
       }
	</script>
	<!-- ================== END PAGE LEVEL JS ================== -->
	{% if form.errors or form_mode == "update" %}
	<script type="text/javascript">
		$( document ).ready(function() {
		    $(".modal").modal('toggle');
		});
	
	
	</script>
	{% endif %}
{% endblock %}

