{% extends "login/base-list.html" %}
{% load extra_filters %}
{% load staticfiles %}

{% block css %}
    {{ block.super }}
{% endblock %}

{% block section_title %}
    Consultar depositos
{% endblock %}

{% block section_subtitle %}
    <br/>
    <div class="email-btn-row hidden-xs" style="margin-left: 1.4%;">
        <a href="{% url "deposito-nuevo" %}" class="btn btn-sm btn-inverse">
            <i class="fa fa-plus m-r-5"></i>
            Nuevo
        </a>
    </div>
{% endblock %}

{% block content %}
    <div class="row">
        <!-- begin col-6 -->
        <div class="col-md-12">
            <div class="panel-heading">
                <div class="panel panel-inverse">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                            <a aria-expanded="true" class="accordion-toggle accordion-toggle-styled"
                               data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                                <i class="fa fa-plus-circle pull-right"></i>
                                Búsqueda
                            </a>
                        </h3>
                    </div>
                    <div id="collapseOne" aria-expanded="true" id="collapseOne"
                         class="panel-collapse collapse in">
                        <div class="panel-body panel-border">
                            <form class="form-horizontal" method="post" action="{% url "conciliaciones-crear" %}"
                                  data-validate="parsley">
                                {% csrf_token %}
                                <div class="form-group">
                                    <label class="col-sm-2 control-label"
                                           for="exampleInputName2"></label>
                                    <label class="col-sm-1 control-label" for="exampleInputEmail2">Desde </label>
                                    <div class="col-sm-2">
                                        <input id="fecha_desde" class="form-control" type="text"
                                               name="fecha_desde" required>
                                    </div>
                                    <label class="col-sm-1 control-label" for="exampleInputEmail2">Hasta</label>
                                    <div class="col-sm-2">
                                        <input id="fecha_hasta" class="form-control" type="text"
                                               name="fecha_hasta" required>
                                    </div>
                                </div>
                                <hr>
                                <button type="submit" class="btn btn-inverse"><i class="glyphicon glyphicon-search"></i>
                                    Consultar
                                </button>
                                <br>
                                <br>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- begin col-12 -->
    <div class="col-md-12">
        <!-- begin panel -->
        <div class="panel panel-inverse">
            <div class="panel-heading">
                <div class="panel-heading-btn">
                    <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand">
                        <i class="fa fa-expand"></i>
                    </a>
                    <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning"
                       data-click="panel-collapse">
                        <i class="fa fa-minus"></i>
                    </a>
                </div>
                <h4 class="panel-title"></h4>
            </div>
            <div class="panel-body">
                <div class="table-responsive">
                    <table id="data-table" class="table table-striped table-bordered">
                        <thead>
                        <tr>
                            <th>Emisión</th>
                            <th>Comprobante</th>
                            <th>Banco</th>
                            <th>Valor</th>
                            <th>Acción</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for movimiento  in movimientos %}
                            <tr>
                                <td>{{ movimiento.fecha_emision }}</td>
                                <td>{{ movimiento.numero_comprobante }}</td>
                                <td>{{ movimiento.banco.nombre }}</td>
                                <td></td>
                                <td>
                                    <a href="{% url 'movimiento-edit' movimiento.id %}">
                                        <button type="button" class="btn btn-primary btn-xs">
                                            <i class="fa fa-pencil-square-o icon-white"></i>
                                        </button>
                                    </a>
                                    <a href="{% url 'movimiento-edit' movimiento.id %}">
                                        <button type="button" class="btn btn-danger btn-xs">
                                            <i class=" glyphicon glyphicon-trash icon-white"></i>
                                        </button>
                                    </a>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- end panel -->
        <!-- #modal-dialog -->
    </div>
    <!-- end col-12 -->
{% endblock %}

{% block javascript %}
    {{ block.super }}
    <!-- ================== BEGIN PAGE LEVEL JS TABLE ================== -->
    <script src="{% static 'color_admin/assets/plugins/parsley/dist/parsley.js' %}"></script>
    <script src="{% static 'color_admin/assets/plugins/bootstrap-wizard/js/bwizard.js' %}"></script>
    <script src="{% static 'color_admin/assets/js/form-wizards-validation.demo.min.js' %}"></script>
    <!-- ================== END PAGE LEVEL JS ================== -->
    <script>
        $('#fecha_desde').datepicker({todayHighlight: true, autoclose: true});

        $('#fecha_desde').val(getFechaHoy());

        $('#fecha_hasta').datepicker({todayHighlight: true, autoclose: true});

        $('#fecha_hasta').val(getFechaHoy());

        function getFechaHoy() {
            var today = new Date();
            var dd = today.getDate();
            var mm = today.getMonth() + 1; //January is 0!
            var yyyy = today.getFullYear();

            if (dd < 10) {
                dd = '0' + dd
            }
            if (mm < 10) {
                mm = '0' + mm
            }
            today = dd + '/' + mm + '/' + yyyy;
            return today;
        }
    </script>


{% endblock %}



