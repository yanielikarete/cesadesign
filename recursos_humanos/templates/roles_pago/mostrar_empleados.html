
<form class="form-horizontal" action="/recursos_humanos/guardarOtrosEgresos/" name="egresosForm" method="POST" id="registrar_eg">
    <input type="hidden" value="" name="tipo_guardar_ingreso" id="tipo_ingreso_id">
    <input type="hidden" value="" name="quincena" id="quincena_id">
    <input type="hidden" value="" name="mes" id="mes_id">
    <input type="hidden" value="" name="anio" id="anio_id">
    <input type="hidden" value="RPQ" name="tipo_rol" id="tipo_rol_id">
    <input type="hidden" value="None" name="tipo_contrato_persona" id="tipo_contrato_persona">

	<div class="alert alert-danger hide" id="msj_error_ingresos"></div>
	
	<div class="panel panel-default">
	    <div class="panel-heading">
	        <h3 class="panel-title"><i class="ico-user mr5"></i>Datos del Empleado</h3>
	    </div>
	  
	</div>
    
	<div class="panel panel-default-grey">
	    <div class="panel-heading">
	        <h3 class="panel-title">Empleados</h3>
	    </div>
	    <div class="panel-body">
	        <div class="ingresos">
				<table style="background-color: white" class="table table-bordered" id="tabla_otros_egresos">
					<thead>
						<tr>
							<th width="25px"></th>
							<th width="1px" class="id_ingreso" style="display: none;"></th>
							<th><b>Cedula</b></th>
							<th><b>Nombre</b></th>							
						</tr>
					</thead>
					<tbody id="tdetalle_ingreso">

                                                  {% if detalle %}
                                                    {% for kit  in detalle %}

                                                  <tr>
                                                    <td onclick="cargarEmpleado('{{ kit.empleado_id }}','{{ kit.nombre_empleado }}','{{ kit.apellido }}','{{ kit.cedula_empleado }}')" ><a class="btn btn-danger remove_fields" >
                                                        <i class=" glyphicon glyphicon-plus icon-white"></i>
                                                      </a>
                                                    </td>
                                                  
                                                    <td> 
                                                    <input type="hidden" class="form-control" id="id_detalle{{ forloop.counter }}" name="id_detalle{{ forloop.counter }}" value="{{ kit.empleado_id }}"/>
                                                    {{ kit.cedula_empleado}}
                                                 </td>
                                                    <td>{{ kit.nombre_empleado}} {{ kit.apellido}}</td>
                                                
                                                     
                                                  </tr>
                                                        {% endfor %} 
                                                   {% else %}
                          <tr>
                                                    <td class="eliminar"><a class="btn btn-danger remove_fields">
                                                        <i class=" glyphicon glyphicon-add icon-white"></i>
                                                      </a>
                                                    </td>

                                                       <td ><input type="hidden" class="form-control" id="id_detalle{{ forloop.counter }}" name="id_detalle{{ forloop.counter }}" value="{{ kit.empleado_id }}"/>
                                                    {{ kit.cedula_empleado}}
                                                    </td>
                                                    <td>{{ kit.nombre_empleado}}</td>
                                                    

                                                  </tr>

                                                   {% endif %}

						
					</tbody>
				</table>

			</div>
	    </div>
	</div>
   
</form>
				 </div>
							                </div>
							            </div>
							        </div>
							    </div>

                        

<script src="/static/color_admin/assets/plugins/DataTables-1.9.4/js/jquery.dataTables.js"></script>
<script src="/static/color_admin/assets/plugins/DataTables-1.9.4/js/data-table.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
          $('#tabla2').DataTable();

        /**
         * Funcion parnueva columna en la tabla
         */
        $("#add").click(function(){
            // Obtenemos el numero de filas (td) que tiene la primera columna
            // (tr) del id "tabla"
            var num_recetas=$('#columnas_receta_otros_egresos').val();
            num_recetas=parseInt(num_recetas)+1;

            var tds=$("#tabla_otros_egresos tr:first td").length;
            // Obtenemos el total de columnas (tr) del id "tabla"
            var trs=$("#tabla_otros_egresos tr").length;
            var nuevaFila='<tr><td  class="eliminar"><a class="btn btn-danger remove_fields "><i class=" glyphicon glyphicon-trash icon-white"></i></a></td>';
             nuevaFila+='<td><select class="form-control" id="tipos_kits'+num_recetas+'" name="tipos_kits'+num_recetas+'"> ';
                                    {% for am  in tipos %}
                      nuevaFila+='<option value="{{ am.id }}"> {{ am.nombre }}</option>';
                 
                                  {% endfor %} 
              nuevaFila+='</select></td>';
                
                nuevaFila+='<td><input type="text"  class="form-control" id="nombre_kits'+num_recetas+'" name="nombre_kits'+num_recetas+'" ></td>';
                nuevaFila+='<td><input type="text"  class="form-control" id="valor_kits'+num_recetas+'" name="valor_kits'+num_recetas+'" ></td>';
                  nuevaFila+='<td><input type="checkbox" id="memo_kits'+num_recetas+'" name="memo_kits'+num_recetas+'" ></td>';
                  
                nuevaFila+='</tr>';

              $('#columnas_receta_otros_egresos').val(num_recetas);
            // for(var i=0;i<tds;i++){
           
            //     nuevaFila+="<td>columna "+(i+1)+" on jquery</td>";
            // }
            // // 
            // nuevaFila+="<td>"+(trs+1)+" columnas";
            // nuevaFila+="</tr>";
            $("#tabla_otros_egresos").append(nuevaFila);
        });
 
        /**
         * Funcion para eliminar la ultima columna de la tabla.
         * Si unicamente queda una columna, esta no sera eliminada
         */
        $("#del").click(function(){
            // Obtenemos el total de columnas (tr) del id "tabla"
            var trs=$("#tabla_otros_egresos tr").length;
            if(trs>1)
            {
                // Eliminamos la ultima columna
                $("#tabla_otros_egresos tr:last").remove();
            }
        });


        $(document).on("click",".eliminar",function(){
            var parent = $(this).parent();
  $(parent).remove();
          });

    });
    </script>
    <script type="text/javascript">
  
     function cargarEmpleado(id,nombre,apellido,cedula){

      var empleado='';
      if(apellido){
       empleado=nombre+''+apellido;
      }else{
        empleado=nombre;
      }
     
       $('#empleado_id').val(id);
       $('#empleado').val(empleado);
       $("#dlgEgreso").modal('toggle');

      }


        </script>
