{% extends "login/base-list.html" %}
{% load extra_filters %}

{% load staticfiles %}

{% block css %}
{{ block.super }}
{% endblock %}

{% block section_title %}Plantillas{% endblock %}
{% block section_subtitle %}
<br />
 <div class="email-btn-row hidden-xs">
                        <a href="{% url 'plantillas-create' %}" class="btn btn-sm btn-success"><i class="fa fa-plus m-r-5"></i> Nuevo</a>
                    </div>

                    {% endblock %}

{% block content %}
				<!-- begin col-12 -->
				<div class="col-md-12">
					<!-- begin panel -->
					<div class="panel panel-inverse">
						<div class="panel-heading">
							<div class="panel-heading-btn">
								<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
								<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
							</div>
							<h4 class="panel-title"> General  </h4>
						</div>
						<div class="panel-body">

							<div class="table-responsive">
								<table id="data-table" class="table table-striped table-bordered">
									<thead>
										<tr>

											<th>Codigo</th>
											<th>Descripcion</th>

											<th>Accion</th>
										</tr>
									</thead>
									<tbody>
										{% for r  in plantillas %}
											<tr>
												<td>{{ r.codigo }}</td>
												<td>{{ r.nombre }}</td>


												<td>

                                                    <a href="{% url 'plantillas-update' r.id %}">
														<button type="button" class="btn btn-info btn-xs"><i class="fa fa-cog"></i> Editar</button>
													</a>




                                                    <a href="#" onclick="eliminar({{r.id}})">
														<button type="button" class="btn btn-info btn-xs"><i class="fa fa-cog"></i> Eliminar</button>
													</a>


												</td>
											</tr >
										{% endfor %}
									</tbody>
								</table>
							</div>




						</div>
					</div>
					<!-- end panel -->

					<!-- #modal-dialog -->

				</div>
				<!-- end col-12 -->

{% endblock %}

{% block javascript %}
{{ block.super }}

	<script type="text/javascript">


	function detalledeCompra(id){
          $.ajax({
                url: "/config/obtenerDetalleCompra/", // the endpoint
                type : "POST", // http method
                data : { id : id,'csrfmiddlewaretoken': '{{ csrf_token }}'},
                success:function(data){
                  $("#detalle").append(data);
                },
                error: function(){

                },
              });
    }

function eliminar(id){
                var fila=id



            var parametros = {
                'id':fila,
                'csrfmiddlewaretoken': '{{ csrf_token }}'

            }

            $.ajax({
                    url: "/recursos_humanos/plantilla_rrhh/eliminar/",
                    type: "POST",
                    async: true,
                    data: parametros,
                    success: function(data){
                        alert(data);
                        location.href="/recursos_humanos/plantilla_rrhh/";


                    },
                error: function (xhr, ajaxOptions, thrownError) {
                        alert('No se puede eliminar esta plantilla');},
                    complete: function(){
                    }
                });
    }

</script>
	<!-- ================== END PAGE LEVEL JS ================== -->
	{% if form.errors or form_mode == "update" %}
	<script type="text/javascript">

		$( document ).ready(function() {
		    $(".modal").modal('toggle');
		});

	</script>
	{% endif %}
{% endblock %}


